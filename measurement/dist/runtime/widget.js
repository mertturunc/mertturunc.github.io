System.register(["jimu-core","jimu-ui","jimu-arcgis","esri/widgets/Measurement","esri/geometry/Point","esri/layers/GraphicsLayer","esri/Graphic","esri/geometry/SpatialReference","esri/rest/support/ProjectParameters","esri/rest/geometryService","esri/config","esri/symbols/PictureMarkerSymbol"],(function(e,t){var i={},s={},o={},a={},r={},n={},l={},c={},d={},u={},h={},p={};return{setters:[function(e){i.React=e.React,i.css=e.css,i.jsx=e.jsx},function(e){s.Button=e.Button,s.WidgetPlaceholder=e.WidgetPlaceholder,s.utils=e.utils},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent},function(e){a.default=e.default},function(e){r.default=e.default},function(e){n.default=e.default},function(e){l.default=e.default},function(e){c.default=e.default},function(e){d.default=e.default},function(e){u.default=e.default},function(e){h.default=e.default},function(e){p.default=e.default}],execute:function(){e((()=>{var e={414:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 50 50"><path d="m12.791 46.923 30.23-36.674-9.913-8.172-2.501 3.033 3.954 3.259-.636.771-3.953-3.259-2.412 2.927 2.25 1.854-.636.772-2.25-1.855-2.412 2.925 3.954 3.259-.637.772-3.953-3.259-2.412 2.926 2.25 1.855-.636.772-2.25-1.855-2.411 2.925 3.953 3.259-.637.772-3.953-3.259-2.411 2.926 2.25 1.854-.636.772-2.25-1.855-2.412 2.926 3.953 3.259-.636.771-3.953-3.259-2.412 2.926 2.25 1.856-.636.771-2.25-1.855-2.412 2.925 3.953 3.259-.636.772-3.953-3.259-2.712 3.291z"></path></svg>'},516:e=>{e.exports="data:image/png;base64,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"},129:e=>{"use strict";e.exports=l},586:e=>{"use strict";e.exports=h},294:e=>{"use strict";e.exports=r},443:e=>{"use strict";e.exports=c},231:e=>{"use strict";e.exports=n},442:e=>{"use strict";e.exports=u},218:e=>{"use strict";e.exports=d},719:e=>{"use strict";e.exports=p},820:e=>{"use strict";e.exports=a},826:e=>{"use strict";e.exports=o},891:e=>{"use strict";e.exports=i},726:e=>{"use strict";e.exports=s}},t={};function m(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,m),o.exports}m.d=(e,t)=>{for(var i in t)m.o(t,i)&&!m.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},m.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="";var A={};return m.p=window.jimuConfig.baseUrl,(()=>{"use strict";m.r(A),m.d(A,{__set_webpack_public_path__:()=>f,default:()=>g});var e=m(891),t=m(726),i=m(826),s=m(820),o=m(294),a=m(231),r=m(129),n=m(443),l=m(218),c=m(442),d=m(586);function u(t,i){const s=t.surfaces[1].bg;return e.css`
  overflow: auto;
  .widget-measure {
    width: 100%;
    height: 100%;
    background-color: ${s};
  }

  .measureToolbarDiv button {
    margin: 0 4px 0 4px;
  }

  #toolbarDiv {
    padding: 12px;
  }

  .esri-measurement {
    top: 60px;
    position: absolute;
    width: calc(100% - 0.5rem);
  }
  `}const h={_widgetLabel:"Measurement",distMeasureTool:"Distance Measurement Tool",areaMearureTool:"Area  Measurement Tool",clearMeasure:"Clear Measurements",pointMeasureTool:"Location Tool"};var p=m(719);const v=m(516),w=m(414);class g extends e.React.PureComponent{constructor(t){super(t),this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:h[e]}):e,this.activeViewChangeHandler=e=>{null!=e&&(this.mapView=e.view,e.whenJimuMapViewLoaded().then((()=>{this.drawLayer&&!this.mapView.map.findLayerById(this.drawLayer.id)&&this.mapView.map.add(this.drawLayer)})),this.createAPIWidget())},this.pointMeasurement=()=>{if(this.state.pointBtnActive)return this.setState({pointBtnActive:!1,showLocation:!1,showLocHint:!0,showLocResults:!1}),document.querySelector(".widget-map.esri-view").style.cursor="default",this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null),void this.drawLayer.removeAll();this.measureWidget.clear(),this.setState({showLocation:!0,showLocHint:!0,showLocResults:!1,lineBtnActive:!1,areaBtnActive:!1,pointBtnActive:!0}),document.querySelector(".widget-map.esri-view").style.cursor="crosshair",this.viewClickHandler=this.mapView.on("click",(e=>{e.stopPropagation(),this.setState({showLocation:!0,showLocHint:!1,showLocResults:!0,y:e.mapPoint.latitude,x:e.mapPoint.longitude}),this.setLocationValue();var t=new r.default({geometry:e.mapPoint,symbol:this.pointSymbol});this.drawLayer.removeAll(),this.drawLayer.add(t)}))},this.distanceMeasurement=()=>{if(this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null),this.state.lineBtnActive)return this.clearMeasurements(),this.setState({lineBtnActive:!1,showLocation:!1,showLocHint:!0,showLocResults:!1}),document.querySelector(".widget-map.esri-view").style.cursor="default",void(this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null));this.setState({showLocation:!1,showLocHint:!1,showLocResults:!1,lineBtnActive:!0,areaBtnActive:!1,pointBtnActive:!1}),this.measureWidget.activeTool="distance",this.measureWidget.linearUnit=this.props.config.defaultLengthUnit},this.areaMeasurement=()=>{if(this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null),this.state.areaBtnActive)return this.clearMeasurements(),this.setState({areaBtnActive:!1,showLocation:!1,showLocHint:!0,showLocResults:!1}),document.querySelector(".widget-map.esri-view").style.cursor="default",void(this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null));this.setState({showLocation:!1,showLocHint:!1,showLocResults:!1,lineBtnActive:!1,areaBtnActive:!0,pointBtnActive:!1}),this.measureWidget.activeTool="area",this.measureWidget.areaUnit=this.props.config.defaultAreaUnit},this.clearMeasurements=()=>{this.setState({showLocation:!1,lineBtnActive:!1,areaBtnActive:!1,pointBtnActive:!1}),this.measureWidget.clear(),document.querySelector(".widget-map.esri-view").style.cursor="default",this.viewClickHandler&&(this.viewClickHandler.remove(),this.viewClickHandler=null),this.drawLayer.removeAll()},this.locUnitChange=e=>{var t,i,s,o,a;const r=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,n=(null===(a=null===(o=null===(i=null==e?void 0:e.target)||void 0===i?void 0:i.options[null===(s=null==e?void 0:e.target)||void 0===s?void 0:s.selectedIndex])||void 0===o?void 0:o.dataset)||void 0===a?void 0:a.wkid)||0;this.setState({cs:r,csWKID:parseInt(n)},(()=>this.setLocationValue()))},this.setLocationValue=()=>{if("DMS"===this.state.cs)this.setState({xyStr:this.deg_to_dms(this.state.y,!1)+", "+this.deg_to_dms(this.state.x,!0),locationStr:"Location (Lat, Lon)"});else if("CUSTOM"===this.state.cs){var e=new l.default;e.geometries=[new o.default({latitude:this.state.y,longitude:this.state.x})],e.outSpatialReference=new n.default({wkid:this.state.csWKID}),c.default.project(d.default.geometryServiceUrl,e).then((e=>{const t=e[0];this.setState({xyStr:t.x.toFixed(6)+", "+t.y.toFixed(6),locationStr:"Location (X, Y)"})}))}else"DEG"===this.state.cs&&this.setState({xyStr:this.state.y.toFixed(6)+", "+this.state.x.toFixed(6),locationStr:"Location (Lat, Lon)"})},this.deg_to_dms=(e,t)=>{var i=parseInt(e.toString()),s=Math.abs(60*(e-i)),o=Math.floor(s),a=60*(s-o),r=Math.round(100*(a+Number.EPSILON))/100;return i=Math.abs(i),60==r&&(o++,r=0),60==o&&(i++,o=0),`${i}Â° ${o}' ${r}" ${e<0?t?"W":"S":t?"E":"N"}`},this.getLocationOptions=()=>{const t=[];return this.props.config.locationOptions.map((i=>{t.push((0,e.jsx)("option",{"data-wkid":i.wkid,value:i.type},i.label))})),t},this.state={lineBtnActive:!1,areaBtnActive:!1,pointBtnActive:!1,y:null,x:null,showLocation:!1,showLocHint:!1,showLocResults:!1,cs:this.props.config.locationOptions[0].type,csWKID:this.props.config.locationOptions[0].wkid||4326,xyStr:"",locationStr:"Location (Lat, Lon)",useLocationTool:this.props.config.locationTool,useDistanceTool:this.props.config.distanceTool,useAreaTool:this.props.config.areaTool},this.apiWidgetContainer=e.React.createRef(),this.locationDiv=e.React.createRef()}componentDidMount(){this.createAPIWidget()}componentWillUnmount(){this.measureWidget&&(this.measureWidget.destroy(),this.measureWidget=null)}componentDidUpdate(){this.setState({useLocationTool:this.props.config.locationTool,useDistanceTool:this.props.config.distanceTool,useAreaTool:this.props.config.areaTool})}createAPIWidget(){if(this.mapView&&!this.measureWidget&&this.apiWidgetContainer.current){this.drawLayer=new a.default({id:"DrawGLayer",listMode:"hide"}),this.pointSymbol=new p.default({url:v,width:12,height:20,yoffset:10}),this.measureWidget=new s.default({view:this.mapView,container:this.apiWidgetContainer.current});const e=this;this.measureWidget.watch("activeWidget",(function(i){if(i&&"esri-icon-measure-line"===i.iconClass){let s=t.utils.convertStringColorToJsAPISymbolColor(e.props.config.pathColor,e.props.theme),o=s,a=s;o[3]=.8,a[3]=204,i.viewModel.palette.handleColor=o,i.viewModel.palette.pathPrimaryColor=a,i.viewModel.palette.pathSecondaryColor=[255,255,255,204],i.viewModel.palette.pathWidth=4,i.viewModel.palette.handleWidth=6}else if(i){let s=t.utils.convertStringColorToJsAPISymbolColor(e.props.config.pathColor,e.props.theme),o=s,a=s,r=t.utils.convertStringColorToJsAPISymbolColor(e.props.config.fillColor,e.props.theme);o[3]=.5,a[3]=.8,r[3]=.3,i.viewModel.palette.pathColor=o,i.viewModel.palette.handleColor=a,i.viewModel.palette.fillColor=r,i.viewModel.palette.handleWidth=6}}))}}render(){var s;const o=this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0],{config:a}=this.props,{showLocation:r,showLocHint:n,showLocResults:l,xyStr:c,locationStr:d,areaBtnActive:p,lineBtnActive:m,pointBtnActive:A,useLocationTool:v,useDistanceTool:g,useAreaTool:f}=this.state;return o?(0,e.jsx)("div",{className:"widget-measure jimu-widget",css:u(this.props.theme)},o&&(0,e.jsx)(i.JimuMapViewComponent,{useMapWidgetId:null===(s=this.props.useMapWidgetIds)||void 0===s?void 0:s[0],onActiveViewChange:this.activeViewChangeHandler}),(0,e.jsx)("div",{id:"toolbarDiv",className:"esri-component esri-widget"},(0,e.jsx)("div",{className:"measureToolbarDiv"},v&&(0,e.jsx)(t.Button,{className:"esri-icon-map-pin",size:"sm",type:"default",active:A,onClick:this.pointMeasurement,title:this.nls("pointMeasureTool")}),g&&(0,e.jsx)(t.Button,{className:"esri-icon-measure-line",size:"sm",type:"default",active:m,onClick:this.distanceMeasurement,title:this.nls("distMeasureTool")}),f&&(0,e.jsx)(t.Button,{className:"esri-icon-measure-area",size:"sm",type:"default",active:p,onClick:this.areaMeasurement,title:this.nls("areaMearureTool")}),(0,e.jsx)(t.Button,{className:"esri-icon-trash",size:"sm",type:"default",onClick:this.clearMeasurements,title:this.nls("clearMeasure")}))),(0,e.jsx)("div",{className:"esri-measurement",ref:this.apiWidgetContainer}),r&&(0,e.jsx)("div",{className:"esri-measurement",ref:this.locationDiv},(0,e.jsx)("div",{className:"esri-distance-measurement-2d esri-widget esri-widget--panel"},(0,e.jsx)("div",{className:"esri-distance-measurement-2d__container"},n&&(0,e.jsx)("section",{className:"esri-distance-measurement-2d__hint"},(0,e.jsx)("p",{className:"esri-distance-measurement-2d__hint-text"},"Click on the map to display the location")),l&&(0,e.jsx)("div",null,(0,e.jsx)("div",{className:"esri-distance-measurement-2d__settings"},(0,e.jsx)("section",{className:"esri-distance-measurement-2d__units"},(0,e.jsx)("label",{className:"esri-distance-measurement-2d__units-label"},"Unit"),(0,e.jsx)("div",{className:"esri-distance-measurement-2d__units-select-wrapper"},(0,e.jsx)("select",{className:"esri-distance-measurement-2d__units-select esri-select",onChange:this.locUnitChange},this.getLocationOptions())))),(0,e.jsx)("section",{className:"esri-distance-measurement-2d__measurement"},(0,e.jsx)("div",{className:"esri-distance-measurement-2d__measurement-item"},(0,e.jsx)("span",{className:"esri-distance-measurement-2d__measurement-item-title"},d),(0,e.jsx)("span",{className:"esri-distance-measurement-2d__measurement-item-value"},c)))))))):(0,e.jsx)("div",{className:"widget-measure jimu-widget",css:u(this.props.theme)},(0,e.jsx)(t.WidgetPlaceholder,{icon:w,autoFlip:!0,message:this.props.intl.formatMessage({id:"_widgetLabel",defaultMessage:h._widgetLabel}),widgetId:this.props.id}))}}function f(e){m.p=e}})(),A})())}}}));