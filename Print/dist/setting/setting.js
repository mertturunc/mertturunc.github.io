System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui"],(function(e,t){var a={},s={},o={};return{setters:[function(e){a.React=e.React,a.defaultMessages=e.defaultMessages,a.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){s.MapWidgetSelector=e.MapWidgetSelector,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection},function(e){o.Select=e.Select,o.TextInput=e.TextInput,o.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={891:e=>{"use strict";e.exports=a},726:e=>{"use strict";e.exports=o},756:e=>{"use strict";e.exports=s}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var r={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(r),i.d(r,{__set_webpack_public_path__:()=>n,default:()=>o});var e=i(891);const t={sourceLabel:"Widget Settings",selectMapWidget:"Select a Map widget",serviceURL:"Print Service URL",defaultsSectionLabel:"Defaults for output",defaultTitle:"Title",defaultAuthor:"Author",defaultCopyright:"Copyright",defaultFormat:"Format",defaultLayout:"Layout"};var a=i(756),s=i(726);class o extends e.React.PureComponent{constructor(a){super(a),this.esriRequest=null,this.initPrintServiceParams=()=>{this.esriRequest(this.props.config.serviceURL,{responseType:"json",query:{f:"json"},timeout:1e4,useProxy:!1}).then((e=>{e.data.parameters.map((e=>{"Format"===e.name&&this.setState({formatChoiceList:e.choiceList}),"Layout_Template"===e.name&&this.setState({layoutChoiceList:e.choiceList})}))}))},this.getLayoutOptions=()=>{const t=[];return this.state.layoutChoiceList.map(((a,s)=>{t.push(e.React.createElement("option",{key:s,value:a},a))})),t},this.getFormatOptions=()=>{const t=[];return this.state.formatChoiceList.map(((a,s)=>{t.push(e.React.createElement("option",{key:s,value:a},a))})),t},this.onPropertyChange=(e,t)=>{const{config:a}=this.props;if(t===a[e])return;const s=a.set(e,t),o={id:this.props.id,config:s};this.props.onSettingChange(o)},this.onMapWidgetSelected=e=>{this.props.onSettingChange({id:this.props.id,useMapWidgetIds:e})},this.formatMessage=(a,o)=>{const i=Object.assign({},t,s.defaultMessages,e.defaultMessages);return this.props.intl.formatMessage({id:a,defaultMessage:i[a]},o)},this.serviceURLChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.onPropertyChange("serviceURL",a)},this.titleChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.onPropertyChange("defaultTitle",a)},this.authorChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.onPropertyChange("defaultAuthor",a)},this.copyrightChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.onPropertyChange("defaultCopyright",a)},this.formatChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.setState({selectedFormat:a}),this.onPropertyChange("defaultFormat",a)},this.layoutChanged=e=>{var t;const a=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.setState({selectedLayout:a}),this.onPropertyChange("defaultLayout",a)},this.state={layoutChoiceList:[],formatChoiceList:[],selectedLayout:this.props.config.defaultLayout,selectedFormat:this.props.config.defaultFormat}}componentDidMount(){(0,e.loadArcGISJSAPIModules)(["esri/request"]).then((e=>{[this.esriRequest]=e,this.initPrintServiceParams()}))}render(){const{config:o}=this.props,{selectedLayout:i,selectedFormat:r}=this.state;return e.React.createElement("div",null,e.React.createElement("div",{className:"widget-setting-print"},e.React.createElement(a.SettingSection,{className:"map-selector-section",title:this.props.intl.formatMessage({id:"sourceLabel",defaultMessage:t.sourceLabel})},e.React.createElement(a.SettingRow,{label:this.formatMessage("selectMapWidget")}),e.React.createElement(a.SettingRow,null,e.React.createElement(a.MapWidgetSelector,{onSelect:this.onMapWidgetSelected,useMapWidgetIds:this.props.useMapWidgetIds})),e.React.createElement(a.SettingRow,{label:this.formatMessage("serviceURL"),flow:"wrap"},e.React.createElement(s.TextInput,{value:o.serviceURL,onChange:this.serviceURLChanged}))),e.React.createElement(a.SettingSection,{className:"defaults-section",title:this.formatMessage("defaultsSectionLabel")},e.React.createElement(a.SettingRow,{label:this.formatMessage("defaultTitle"),flow:"wrap"},e.React.createElement(s.TextInput,{value:o.defaultTitle,onChange:this.titleChanged})),e.React.createElement(a.SettingRow,{label:this.formatMessage("defaultAuthor"),flow:"wrap"},e.React.createElement(s.TextInput,{value:o.defaultAuthor,onChange:this.authorChanged})),e.React.createElement(a.SettingRow,{label:this.formatMessage("defaultCopyright"),flow:"wrap"},e.React.createElement(s.TextInput,{value:o.defaultCopyright,onChange:this.copyrightChanged})),e.React.createElement(a.SettingRow,{label:this.formatMessage("defaultFormat"),flow:"wrap"},e.React.createElement(s.Select,{style:{display:"inline-block",width:"calc(100% -70px)"},onChange:this.formatChanged,className:"top-drop",value:r},this.getFormatOptions())),e.React.createElement(a.SettingRow,{label:this.formatMessage("defaultLayout"),flow:"wrap"},e.React.createElement(s.Select,{style:{display:"inline-block",width:"calc(100% -70px)"},onChange:this.layoutChanged,className:"top-drop",value:i},this.getLayoutOptions())))))}}function n(e){i.p=e}})(),r})())}}}));